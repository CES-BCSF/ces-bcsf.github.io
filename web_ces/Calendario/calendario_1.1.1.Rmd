---
title: "Calendario de publicaciones"
author:
output:
  html_document:
    self_contained: true
    highlight: textmate
    css: "C:/mysyncfolders/bcsf.com.ar/BCSF - Grupo CES - Documentos/CicSFE_sp/_Reportes rmd/_Recursos/css/style.css"
    includes:
      in_header: "C:/mysyncfolders/bcsf.com.ar/BCSF - Grupo CES - Documentos/CicSFE_sp/_Reportes rmd/_Recursos/icons/favicon.html"
runtime: shiny
knit: (function(input_file, encoding) {rmarkdown::render(input_file,encoding=encoding, output_file='Calendario.html') })
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

```{r datos}
df_calendario <- readxl::read_excel("C:/mysyncfolders/bcsf.com.ar/BCSF - Grupo CES - Documentos/CicSFE_sp/Seguimiento Manual.xlsx", range = "OUT_Calendario!B2:I300", col_names = TRUE)

```

```{r limpieza de datos}

df_limpio <- df_calendario |>
  dplyr::filter(!base::is.na(`Categor√≠a`) & `Categor√≠a` != "") |>
  dplyr::mutate(
    `Fecha de publicaci√≥n conocida` = dplyr::case_when(
      suppressWarnings(!base::is.na(base::as.numeric(`Fecha de publicaci√≥n conocida`))) ~ base::as.Date(base::as.numeric(`Fecha de publicaci√≥n conocida`), origin = "1899-12-30"),
      suppressWarnings(!base::is.na(lubridate::dmy(`Fecha de publicaci√≥n conocida`))) ~ lubridate::dmy(`Fecha de publicaci√≥n conocida`),
      TRUE ~ lubridate::NA_Date_
    ),
    `Fecha de publicaci√≥n estimada` = dplyr::case_when(
      suppressWarnings(!base::is.na(base::as.numeric(`Fecha de publicaci√≥n estimada`))) ~ format(base::as.Date(base::as.numeric(`Fecha de publicaci√≥n estimada`), origin = "1899/12/30"), "%d/%m/%Y"),
      suppressWarnings(!base::is.na(lubridate::dmy(`Fecha de publicaci√≥n estimada`))) ~ format(lubridate::dmy(`Fecha de publicaci√≥n estimada`), "%d/%m/%Y"),
      TRUE ~ as.character(`Fecha de publicaci√≥n estimada`)
      ),
    `√öltimo dato` = dplyr::case_when(
      # Caso para datos mensuales
      `Frecuencia` == "Mensual" ~ {
        year <- stringr::str_extract(`√öltimo dato`, "^\\d{4}")
        # Corrige la expresi√≥n regular para extraer los √∫ltimos dos d√≠gitos
        month_num <- base::as.numeric(stringr::str_extract(`√öltimo dato`, "\\d{2}$"))
        base::paste0(year, ".M", month_num)
      },
      # Caso para datos trimestrales
      `Frecuencia` == "Trimestral" ~ {
        year <- stringr::str_extract(`√öltimo dato`, "^\\d{4}")
        # Corrige la expresi√≥n regular para extraer los √∫ltimos dos d√≠gitos
        month_num <- base::as.numeric(stringr::str_extract(`√öltimo dato`, "\\d$"))
        base::paste0(year, ".T", month_num)
      },
      # Caso para datos semestrales
      `Frecuencia` == "Semestral" ~ {
        year <- stringr::str_extract(`√öltimo dato`, "^\\d{4}")
        # Corrige la expresi√≥n regular para extraer los √∫ltimos dos d√≠gitos
        month_num <- base::as.numeric(stringr::str_extract(`√öltimo dato`, "\\d$"))
        base::paste0(year, ".S", month_num)
      },
      # El resto de los casos (incluyendo anuales) no se modifican
      TRUE ~ `√öltimo dato`
    )
  )
  # |> dplyr::select(-`Fecha de publicacion as Date`)
```

```{r volver_al_indice, echo=FALSE, results='asis', message=FALSE, warning=FALSE}

  volver_al_indice <- paste('<div class="back-to-index-container">
                              <a href="#ref_notas" class="back-to-index-btn">
                                <span class="btn-icon">‚Üë</span>
                                <span class="btn-text">Volver al √≠ndice</span>
                              </a>
                            </div>')

```

```{=html}
<div class="page-container">

<div class="header-banner">
  <img src="C:/mysyncfolders/bcsf.com.ar/BCSF - Grupo CES - Documentos/CicSFE_sp/_Reportes rmd/_Recursos/icons/encabezado_informes_generales_p√°gina_interior.png" alt="Logo"/>
</div>

<div class="titulo-principal">CALENDARIO DE ACTUALIZACI√ìN DE DATOS</div>

<div class="fecha-encabezado"> Datos actualizados al `r base::format(base::Sys.Date(), '%d')` de `r base::format(base::Sys.Date(), '%B')` de `r base::format(base::Sys.Date(), '%Y')`
</div>

<hr>

<h2>Alcance</h2>
<p>El calendario de publicaciones presenta las fechas previstas de actualizaci√≥n para cada uno de los indicadores clave vinculados al proyecto de ciclos econ√≥micos de la provincia de Santa Fe. 
Adicionalmente, provee informaci√≥n sobre las fuentes utilizadas, la frecuencia de publicaci√≥n, el √∫ltimo dato disponible y el alcance de cada variable. La informaci√≥n estad√≠stica de cada indicador se encuentra a disposici√≥n en nuestra <a href="https://www.bcsf.com.ar/ces/base-datos/preview/1/base-de-datos-estadisticos-de-la-provincia-de-santa-fe" target="_blank">base de datos</a> (la cual se actualiza en la web todos los meses).</p>

<hr>
```

```{r filtros} 
shared_df <- crosstalk::SharedData$new(df_limpio)

htmltools::div(
  crosstalk::bscols(
    widths = base::c(4, 4, 4),
    crosstalk::filter_select("Categor√≠a", "Categor√≠a", shared_df, ~`Categor√≠a`),
    crosstalk::filter_select("Fuente", "Fuente", shared_df, ~Fuente),
    crosstalk::filter_select("Alcance geogr√°fico", "Alcance geogr√°fico", shared_df, ~`Alcance geogr√°fico`)
  )
)
```

```{=html}
<p id="ref_notas">Ver <a href="#referencias">notas</a> en relaci√≥n a Categor√≠a/Fuente/Alcance geogr√°fico. Adem√°s, al final del cuadro se lista un <a href="#ref_glosario">glosario</a> de indicadores, fuentes y abreviaciones.</p>

<hr>
```

```{r tabla}
DT::datatable(
  shared_df,
  rownames = FALSE,
  filter = "none",
  options = base::list(
    pageLength = 150,
    dom = "ft",
    scrollX = TRUE,
    fixedHeader = TRUE,
    autoWidth = TRUE,
    order = base::list(base::list(0, "asc"), base::list(1, "asc")),  # Ordenar por la primera columna "Indicador"
    columnDefs = base::list(
      base::list(className = "dt-center", targets = "_all"),
      base::list(
        targets = 3, # columnas de fecha
        render = DT::JS(
          "function(data, type, row, meta) {",
          "  if(type === 'sort') {",
          "    if(data === null || data === '' || data === '-') { return '9999-12-31'; }",
          "    return data;",
          "  }",
          "  if(type === 'display') {",
          "    if(data === null || data === '') { return '-'; }",
          "    var d = new Date(data);",
          "    if(isNaN(d)) { return data; }",
          "    var day = ('0' + (d.getUTCDate())).slice(-2);",
          "    var month = ('0' + (d.getUTCMonth()+1)).slice(-2);",
          "    var year = d.getFullYear();",
          "    return day + '/' + month + '/' + year;",
          "  }",
          "  return data;",
          "}"
        )
      )
    ),
    language = base::list(
      search = "Buscador general (identifica cualquier texto dentro de la tabla)",
      searchPlaceholder = "Escriba aqu√≠ para buscar...",
      paginate = base::list(previous = "", `next` = ""),
      info = ""
    )
  ),
  class = "calendario-dataTable compact stripe hover"
)
```

```{=html}
<hr>
<h2 id=ref_glosario><u>Glosario de indicadores, fuentes y abreviaciones</u></h2>
<!-- <a href="#ref_notas" class="calendario-toc-section"> -->
<!--    <i class="fas fa-arrow-up"></i> üîù Volver al inicio -->
<!-- </a> -->
<p><b>ADEFA</b> | Asociaci√≥n de F√°bricas de Automotores<br>
<b>AFCP</b> | Asociaci√≥n de Fabricantes de Cemento Portland<br>
<b>API</b> | Administraci√≥n Provincial de Impuestos (Santa Fe)<br>
<b>ARCA</b> | Agencia de Recaudaci√≥n y Control Aduanero (ex-AFIP)<br>
<b>ART</b> | Aseguradoras de Riesgos del Trabajo<br>
<b>BCSF</b> | Bolsa de Comercio de Santa Fe<br>
<b>BCRA</b> | Banco Central de la Rep√∫blica Argentina<br>
<b>BYMA</b> | Bolsas y Mercados Argentinos<br>
<b>CAME</b> | Confederaci√≥n Argentina de la Mediana Empresa<br>
<b>CAMMESA</b> | Compa√±√≠a Administradora del Mercado Mayorista El√©ctrico Sociedad An√≥nima<br>
<b>CCL</b> | Contado con Liquidaci√≥n (tipo de cambio impl√≠cito obtenido a trav√©s de la compra de activos en el mercado local y posterior venta en el internacional)<br>
<b>CICEC</b> | Centro de Investigaci√≥n del Ciclo Econ√≥mico (Bolsas de Comercio de Rosario y Santa Fe)<br>
<b>CIFRAS</b> | Centro de Informaci√≥n y Formaci√≥n Regional para la Actividad de la Construcci√≥n (Regi√≥n Litoral)<br>
<b>CLAL</b> | Consultora italiana especializada en el sector l√°cteo, referente internacional<br>
<b>CNV</b> | Comisi√≥n Nacional de Valores<br>
<b>CREEBBA</b> | Centro Regional de Estudios Econ√≥micos de Bah√≠a Blanca Argentina<br>
<b>DNRPA</b> | Direcci√≥n Nacional de los Registros de la Propiedad del Automotor<br>
<b>EMAE</b> | Estimador Mensual de Actividad Econ√≥mica<br>
<b>ENARGAS</b> | Ente Nacional Regulador del Gas<br>
<b>EPH</b> | Encuesta Permanente de Hogares<br>
<b>EPE</b> | Empresa Provincial de la Energ√≠a (Santa Fe)<br>
<b>ETH Zurich</b> | Escuela Polit√©cnica Federal de Z√∫rich (por sus siglas en alem√°n Eidgen√∂ssische Technische Hochschule Z√ºrich)<br>
<b>FIEL</b> | Fundaci√≥n de Investigaciones Econ√≥micas Latinoamericanas<br>
<b>FRED</b> | Federal Reserve Economic Data (Reserva Federal de St. Louis, EE.UU.)<br>
<b>ICA-ARG</b> | √çndice Compuesto de Actividad de Argentina (Centro de Investigaci√≥n del Ciclo Econ√≥mico)<br>
<b>ICA-SFE</b> | √çndice Compuesto de Actividad de Santa Fe (Bolsa de Comercio de Santa Fe)<br>
<b>IGA</b> | √çndice General de Actividad (Orlando J. Ferreres & Asociados)<br>
<b>IERIC</b> | Instituto de Estad√≠stica y Registro de la Industria de la Construcci√≥n<br>
<b>IMAE</b> | Indicador Mensual de Actividad Econ√≥mica (Instituto Provincial de Estad√≠stica y Censos)<br>
<b>INDEC</b> | Instituto Nacional de Estad√≠stica y Censos<br>
<b>IPC</b> | √çndice de Precios al Consumidor<br>
<b>IPIM</b> | √çndice de Precios Internos Mayoristas<br>
<b>IPEC</b> | Instituto Provincial de Estad√≠stica y Censos (Santa Fe)<br>
<b>ITCRM</b> | √çndice de Tipo de Cambio Real Multilateral<br>
<b>IVA</b> | Impuesto al Valor Agregado<br>
<b>MAE</b> | Mercado Abierto Electr√≥nico<br>
<b>MECON</b> | Ministerio de Econom√≠a de la Naci√≥n<br>
<b>MEP</b> | Tipo de cambio impl√≠cito obtenido a trav√©s de operaciones con bonos en el Mercado Electr√≥nico de Pagos<br>
<b>Merval</b> | Mercado de Valores de Buenos Aires<br>
<b>OJF</b> | Consultora Orlando J. Ferreres & Asociados<br>
<b>OEDE</b> | Observatorio de Empleo y Din√°mica Empresarial<br>
<b>PBG</b> | Producto Bruto Geogr√°fico<br>
<b>PEA</b> | Poblaci√≥n Econ√≥micamente Activa<br>
<b>PIB</b> | Producto Interno Bruto<br>
<b>S&P</b> | Standard & Poor‚Äôs (agencia internacional de calificaci√≥n de riesgo y proveedora de √≠ndices financieros)<br>
<b>SIPA</b> | Sistema Integrado Previsional Argentino<br>
<b>TC</b> | Tipo de Cambio<br>
<b>TCRB</b> | Tipo de Cambio Real Bilateral<br>
<b>UTDT</b> | Universidad Torcuato Di Tella<br>
<b>EQUILIBRA</b> | Centro de An√°lisis Econ√≥mico</p>

`r volver_al_indice`

<!-- <p> -->

<hr>
<h2 id=referencias><u>Notas</u></h2>
<!--   <a href="#ref_notas" class="calendario-toc-section"> -->
<!--    <i class="fas fa-arrow-up"></i> üîù Volver al inicio -->
<!--   </a> -->
<!-- </p> -->

<p><strong>Categor√≠a:</strong> clasificaci√≥n propia para agrupar indicadores.<br>
<strong>Indicador:</strong> se√±ala el nombre del indicador. <br>
<strong>Fuente:</strong> organismo o entidad que representa la fuente primaria de la informaci√≥n.<br>
<strong>Alcance geogr√°fico:</strong> especifica el √°rea geogr√°fica de referencia (cuando se menciona Santa Fe, se refiere a la provincia, salvo que se indique expresamente lo contrario).<br>
<strong>Fecha de publicaci√≥n conocida:</strong> informada directamente por la fuente primaria.<br>
<strong>Fecha de publicaci√≥n estimada:</strong> calculada por el equipo del CES a partir del comportamiento hist√≥rico.</p>

`r volver_al_indice`

</div>
<script src="animated-toc.js"></script>
```

